{"version":3,"file":"vue.js","sources":["../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["class Observer {\n  constructor(data) {\n    this.walk(data)\n  }\n\n  walk(data) {\n    Object.keys(data).forEach((key) => defineReactive(data, key, data[key]))\n  }\n}\n\nfunction defineReactive(data, key, value) {\n  // 递归实现深度对象监视\n  observe(value)\n  // 劫持\n  Object.defineProperty(data, key, {\n    get() {\n      console.log('取值')\n      return value\n    },\n    set(nValue) {\n      console.log('设置值')\n      if (value === nValue) return\n      observe(nValue)\n      value = nValue\n    },\n  })\n}\n\nexport function observe(data) {\n  // 只对对象进行劫持\n  if (typeof data !== 'object' || data === null) {\n    return\n  }\n\n  return new Observer(data)\n}\n","import { observe } from './observer/index'\n\nexport function initState(vm) {\n  const opts = vm.$options\n  if (opts.data) {\n    initData(vm)\n  }\n}\n\nfunction proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key]\n    },\n    set(nValue) {\n      vm[source][key] = nValue\n    },\n  })\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data\n\n  // 实现访问 vm.xxx 代理到 vm._data.xxx\n  for (let key of Object.keys(data)) {\n    proxy(vm, '_data', key)\n  }\n\n  observe(data)\n}\n","import { initState } from \"./state\"\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n    vm.$options = options\n    initState(vm)\n  }\n}\n\n","import { initMixin } from './init'\n\nfunction Vue(options) {\n  if (!(this instanceof Vue)) {\n    console.warn('只能够使用new Vue()的方式来创建实例')\n    return\n  }\n  this._init(options)\n}\n\ninitMixin(Vue)\n\nexport default Vue\n"],"names":["Observer","data","walk","Object","keys","forEach","key","defineReactive","value","observe","defineProperty","get","console","log","set","nValue","initState","vm","opts","$options","initData","proxy","source","_data","call","initMixin","Vue","prototype","_init","options","warn"],"mappings":"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"}